{{ 'countdown.css' | asset_url | stylesheet_tag }}
<div class="todays-offer-section container-fluid">
  <div class="{{ section.settings.section_width }}">
    <div class="todays-offer-grid flex flex-wrap justify-center align-items-stretch" style="justify-content: space-between; gap: 5px;">
      <!-- Left side products -->
      <div class="todays-offer-side grid grid-cols-2 flex-1" style="max-width: 480px; min-width: 320px;">
        {% for product in section.settings.side_products_left limit: 4 %}
          <div
            class="todays-offer-side-item bg-white rounded-8 p-16 flex flex-col justify-between shadow-sm"
            style="color: {{ settings.color_text | default: section.settings.text_color | default: '#222' }};"
          >
            <div class="relative mb-10">
              <a href="{{ product.url }}" class="block">
                <img
                  src="{{ product.featured_image | img_url: '240x' }}"
                  alt="{{ product.title }}"
                  class="w-full rounded-6"
                  loading="lazy"
                  width="240px"
                  height="240px"
                >
                <span
                  class="offer-badge badge badge-danger"
                  style="position:absolute;top:8px;left:8px;z-index:2;background:{{ settings.color_badge | default: '#e53935' }};"
                  >-20%</span
                >
              </a>
            </div>
            <div class="fw-600 fs-15 mb-2 line-clamp-2" style="padding-bottom: 6px;">{{ product.title }}</div>
            <div class="flex align-center gap-6 mb-2" style="padding-bottom: 6px;">
              <!-- SVG 5 sao vàng -->
              <span class="fake-rating-stars" style="display:inline-block;vertical-align:middle;">
                <!-- Dán SVG bạn gửi ở đây -->
                <svg width="64" height="12" viewBox="0 0 64 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12.3204 4.35547C12.3595 4.47266 12.3634 4.59375 12.3321 4.71875C12.3009 4.84375 12.2345 4.94922 12.1329 5.03516L9.51962 7.33203L10.2931 10.7305C10.3165 10.8555 10.3048 10.9766 10.2579 11.0938C10.2188 11.2109 10.1485 11.3086 10.047 11.3867C9.93759 11.4648 9.8204 11.5039 9.6954 11.5039C9.5704 11.5117 9.45322 11.4844 9.34384 11.4219L6.35556 9.62891L3.36728 11.4219C3.3204 11.4453 3.26572 11.4648 3.20322 11.4805C3.14853 11.4961 3.09384 11.5039 3.03915 11.5039C2.97665 11.5039 2.91025 11.4922 2.83994 11.4688C2.77744 11.4531 2.71884 11.4258 2.66415 11.3867C2.56259 11.3086 2.48837 11.2109 2.4415 11.0938C2.40244 10.9766 2.39462 10.8555 2.41806 10.7305L3.1915 7.33203L0.578217 5.03516C0.476654 4.94922 0.410248 4.84375 0.378998 4.71875C0.347748 4.59375 0.351654 4.47266 0.390717 4.35547C0.429779 4.23047 0.496185 4.12891 0.589935 4.05078C0.691498 3.97266 0.804779 3.92578 0.929779 3.91016L4.39853 3.60547L5.76962 0.394531C5.8165 0.277344 5.89462 0.183594 6.004 0.113281C6.11337 0.0429688 6.23056 0.0078125 6.35556 0.0078125C6.48056 0.0078125 6.59775 0.0429688 6.70712 0.113281C6.8165 0.183594 6.89462 0.277344 6.9415 0.394531L8.31259 3.60547L11.7813 3.91016C11.9063 3.92578 12.0157 3.97266 12.1095 4.05078C12.211 4.12891 12.2813 4.23047 12.3204 4.35547ZM25.0404 4.35547C25.0795 4.47266 25.0834 4.59375 25.0521 4.71875C25.0209 4.84375 24.9545 4.94922 24.8529 5.03516L22.2396 7.33203L23.0131 10.7305C23.0365 10.8555 23.0248 10.9766 22.9779 11.0938C22.9388 11.2109 22.8685 11.3086 22.767 11.3867C22.6576 11.4648 22.5404 11.5039 22.4154 11.5039C22.2904 11.5117 22.1732 11.4844 22.0638 11.4219L19.0756 9.62891L16.0873 11.4219C16.0404 11.4453 15.9857 11.4648 15.9232 11.4805C15.8685 11.4961 15.8138 11.5039 15.7592 11.5039C15.6967 11.5039 15.6302 11.4922 15.5599 11.4688C15.4974 11.4531 15.4388 11.4258 15.3842 11.3867C15.2826 11.3086 15.2084 11.2109 15.1615 11.0938C15.1224 10.9766 15.1146 10.8555 15.1381 10.7305L15.9115 7.33203L13.2982 5.03516C13.1967 4.94922 13.1302 4.84375 13.099 4.71875C13.0677 4.59375 13.0717 4.47266 13.1107 4.35547C13.1498 4.23047 13.2162 4.12891 13.3099 4.05078C13.4115 3.97266 13.5248 3.92578 13.6498 3.91016L17.1185 3.60547L18.4896 0.394531C18.5365 0.277344 18.6146 0.183594 18.724 0.113281C18.8334 0.0429688 18.9506 0.0078125 19.0756 0.0078125C19.2006 0.0078125 19.3177 0.0429688 19.4271 0.113281C19.5365 0.183594 19.6146 0.277344 19.6615 0.394531L21.0326 3.60547L24.5013 3.91016C24.6263 3.92578 24.7357 3.97266 24.8295 4.05078C24.931 4.12891 25.0013 4.23047 25.0404 4.35547ZM37.7604 4.35547C37.7995 4.47266 37.8034 4.59375 37.7721 4.71875C37.7409 4.84375 37.6745 4.94922 37.5729 5.03516L34.9596 7.33203L35.7331 10.7305C35.7565 10.8555 35.7448 10.9766 35.6979 11.0938C35.6588 11.2109 35.5885 11.3086 35.487 11.3867C35.3776 11.4648 35.2604 11.5039 35.1354 11.5039C35.0104 11.5117 34.8932 11.4844 34.7838 11.4219L31.7956 9.62891L28.8073 11.4219C28.7604 11.4453 28.7057 11.4648 28.6432 11.4805C28.5885 11.4961 28.5338 11.5039 28.4792 11.5039C28.4167 11.5039 28.3502 11.4922 28.2799 11.4688C28.2174 11.4531 28.1588 11.4258 28.1042 11.3867C28.0026 11.3086 27.9284 11.2109 27.8815 11.0938C27.8424 10.9766 27.8346 10.8555 27.8581 10.7305L28.6315 7.33203L26.0182 5.03516C25.9167 4.94922 25.8502 4.84375 25.819 4.71875C25.7877 4.59375 25.7917 4.47266 25.8307 4.35547C25.8698 4.23047 25.9362 4.12891 26.0299 4.05078C26.1315 3.97266 26.2448 3.92578 26.3698 3.91016L29.8385 3.60547L31.2096 0.394531C31.2565 0.277344 31.3346 0.183594 31.444 0.113281C31.5534 0.0429688 31.6706 0.0078125 31.7956 0.0078125C31.9206 0.0078125 32.0377 0.0429688 32.1471 0.113281C32.2565 0.183594 32.3346 0.277344 32.3815 0.394531L33.7526 3.60547L37.2213 3.91016C37.3463 3.92578 37.4557 3.97266 37.5495 4.05078C37.651 4.12891 37.7213 4.23047 37.7604 4.35547ZM50.4804 4.35547C50.5195 4.47266 50.5234 4.59375 50.4921 4.71875C50.4609 4.84375 50.3945 4.94922 50.2929 5.03516L47.6796 7.33203L48.4531 10.7305C48.4765 10.8555 48.4648 10.9766 48.4179 11.0938C48.3788 11.2109 48.3085 11.3086 48.207 11.3867C48.0976 11.4648 47.9804 11.5039 47.8554 11.5039C47.7304 11.5117 47.6132 11.4844 47.5038 11.4219L44.5156 9.62891L41.5273 11.4219C41.4804 11.4453 41.4257 11.4648 41.3632 11.4805C41.3085 11.4961 41.2538 11.5039 41.1992 11.5039C41.1367 11.5039 41.0702 11.4922 40.9999 11.4688C40.9374 11.4531 40.8788 11.4258 40.8242 11.3867C40.7226 11.3086 40.6484 11.2109 40.6015 11.0938C40.5624 10.9766 40.5546 10.8555 40.5781 10.7305L41.3515 7.33203L38.7382 5.03516C38.6367 4.94922 38.5702 4.84375 38.539 4.71875C38.5077 4.59375 38.5117 4.47266 38.5507 4.35547C38.5898 4.23047 38.6562 4.12891 38.7499 4.05078C38.8515 3.97266 38.9648 3.92578 39.0898 3.91016L42.5585 3.60547L43.9296 0.394531C43.9765 0.277344 44.0546 0.183594 44.164 0.113281C44.2734 0.0429688 44.3906 0.0078125 44.5156 0.0078125C44.6406 0.0078125 44.7577 0.0429688 44.8671 0.113281C44.9765 0.183594 45.0546 0.277344 45.1015 0.394531L46.4726 3.60547L49.9413 3.91016C50.0663 3.92578 50.1757 3.97266 50.2695 4.05078C50.371 4.12891 50.4413 4.23047 50.4804 4.35547ZM63.2004 4.35547C63.2395 4.47266 63.2434 4.59375 63.2121 4.71875C63.1809 4.84375 63.1145 4.94922 63.0129 5.03516L60.3996 7.33203L61.1731 10.7305C61.1965 10.8555 61.1848 10.9766 61.1379 11.0938C61.0988 11.2109 61.0285 11.3086 60.927 11.3867C60.8176 11.4648 60.7004 11.5039 60.5754 11.5039C60.4504 11.5117 60.3332 11.4844 60.2238 11.4219L57.2356 9.62891L54.2473 11.4219C54.2004 11.4453 54.1457 11.4648 54.0832 11.4805C54.0285 11.4961 53.9738 11.5039 53.9192 11.5039C53.8567 11.5039 53.7902 11.4922 53.7199 11.4688C53.6574 11.4531 53.5988 11.4258 53.5442 11.3867C53.4426 11.3086 53.3684 11.2109 53.3215 11.0938C53.2824 10.9766 53.2746 10.8555 53.2981 10.7305L54.0715 7.33203L51.4582 5.03516C51.3567 4.94922 51.2902 4.84375 51.259 4.71875C51.2277 4.59375 51.2317 4.47266 51.2707 4.35547C51.3098 4.23047 51.3762 4.12891 51.4699 4.05078C51.5715 3.97266 51.6848 3.92578 51.8098 3.91016L55.2785 3.60547L56.6496 0.394531C56.6965 0.277344 56.7746 0.183594 56.884 0.113281C56.9934 0.0429688 57.1106 0.0078125 57.2356 0.0078125C57.3606 0.0078125 57.4777 0.0429688 57.5871 0.113281C57.6965 0.183594 57.7746 0.277344 57.8215 0.394531L59.1926 3.60547L62.6613 3.91016C62.7863 3.92578 62.8957 3.97266 62.9895 4.05078C63.091 4.12891 63.1613 4.23047 63.2004 4.35547Z" fill="#FFB800"/>
                </svg>
              </span>
              <span class="fs-13 text-muted">(68)</span>
            </div>
            <div class="flex align-center gap-6 mb-2" style="padding-bottom: 6px;">
              {%- assign price_color = '#2B38D1' -%}
              {%- if product.compare_at_price < product.price -%}
                {%- assign price_color = '#DC323C' -%}
              {%- elsif product.inventory_quantity < 10 -%}
                {%- assign price_color = '#EF262C' -%}
              {%- endif -%}
              <span
                class="fw-700 fs-16"
                style="background: {{ settings.color_price_bg | default: section.settings.price_bg_color | default: '#fff' }}; padding: 2px 8px; border-radius: 4px; color: {{ price_color }};"
              >
                {{- product.price | money -}}
              </span>
              {% if product.compare_at_price < product.price %}
                <span class="text-muted text-line-through fs-14">{{ product.compare_at_price | money }}</span>
              {% endif %}
            </div>
            <div class="flex align-center gap-6" style="padding-bottom: 2px;">
              <span class="fs-13 text-muted">In stock: {{ product.inventory_quantity | default: 0 }}</span>
              {% if product.inventory_quantity > 10 %}
                <span class="stock-check-icon" title="In stock">
                  <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.252 0.251953L4.25 6.25391L1.74805 3.75195C1.62956 3.64258 1.48828 3.58789 1.32422 3.58789C1.16927 3.58789 1.03711 3.64258 0.927734 3.75195C0.809245 3.87044 0.75 4.01172 0.75 4.17578C0.75 4.33073 0.809245 4.46289 0.927734 4.57227L3.83984 7.49805C3.94922 7.60742 4.08594 7.66211 4.25 7.66211C4.41406 7.66211 4.55078 7.60742 4.66016 7.49805L11.0723 1.07227C11.1908 0.962891 11.25 0.830729 11.25 0.675781C11.25 0.511719 11.1908 0.370443 11.0723 0.251953C10.9629 0.142578 10.8262 0.0878906 10.6621 0.0878906C10.5072 0.0878906 10.3704 0.142578 10.252 0.251953Z" fill="#008A00"/>
                  </svg>
                </span>
              {% else %}
                <span class="stock-check-icon" title="Low stock">
                  <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.252 0.251953L4.25 6.25391L1.74805 3.75195C1.62956 3.64258 1.48828 3.58789 1.32422 3.58789C1.16927 3.58789 1.03711 3.64258 0.927734 3.75195C0.809245 3.87044 0.75 4.01172 0.75 4.17578C0.75 4.33073 0.809245 4.46289 0.927734 4.57227L3.83984 7.49805C3.94922 7.60742 4.08594 7.66211 4.25 7.66211C4.41406 7.66211 4.55078 7.60742 4.66016 7.49805L11.0723 1.07227C11.1908 0.962891 11.25 0.830729 11.25 0.675781C11.25 0.511719 11.1908 0.370443 11.0723 0.251953C10.9629 0.142578 10.8262 0.0878906 10.6621 0.0878906C10.5072 0.0878906 10.3704 0.142578 10.252 0.251953Z" fill="#E53935"/>
                  </svg>
                </span>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
      <!-- Main featured product -->
      <div
        class="todays-offer-main border rounded-10 p-40 flex-2 bg-white shadow-md"
        style="max-width: 520px; min-width: 340px; color: {{ settings.color_text | default: section.settings.text_color | default: '#222' }};"
      >
        <div class="todays-offer-badge mb-10">
          <span class="badge badge-danger" style="background:{{ settings.color_badge | default: '#e53935' }};"
            >-20%</span
          >
        </div>
        <div class="todays-offer-title mb-10 fs-22 fw-700" style="padding-bottom: 10px;">
          {{ section.settings.main_title }}
        </div>
        <div class="todays-offer-image mb-20 text-center" style="padding-bottom: 10px;">
          <a href="{{ section.settings.main_product.url }}">
            <img
              src="{{ section.settings.main_product.featured_image | img_url: '480x' }}"
              alt="{{ section.settings.main_product.title }}"
              width="420"
              height="420"
              class="rounded-8 mx-auto"
            >
          </a>
        </div>
        <div class="todays-offer-product-title mb-5 fw-600 fs-18 text-center" style="padding-bottom: 6px;">
          <a href="{{ section.settings.main_product.url }}">{{ section.settings.main_product.title }}</a>
        </div>
        <div class="todays-offer-rating mb-5 flex align-center justify-center gap-6" style="padding-bottom: 6px;">
          <!-- SVG 5 sao vàng -->
          <span class="fake-rating-stars" style="display:inline-block;vertical-align:middle;">
            <!-- Dán SVG bạn gửi ở đây -->
            <svg width="64" height="12" viewBox="0 0 64 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12.3204 4.35547C12.3595 4.47266 12.3634 4.59375 12.3321 4.71875C12.3009 4.84375 12.2345 4.94922 12.1329 5.03516L9.51962 7.33203L10.2931 10.7305C10.3165 10.8555 10.3048 10.9766 10.2579 11.0938C10.2188 11.2109 10.1485 11.3086 10.047 11.3867C9.93759 11.4648 9.8204 11.5039 9.6954 11.5039C9.5704 11.5117 9.45322 11.4844 9.34384 11.4219L6.35556 9.62891L3.36728 11.4219C3.3204 11.4453 3.26572 11.4648 3.20322 11.4805C3.14853 11.4961 3.09384 11.5039 3.03915 11.5039C2.97665 11.5039 2.91025 11.4922 2.83994 11.4688C2.77744 11.4531 2.71884 11.4258 2.66415 11.3867C2.56259 11.3086 2.48837 11.2109 2.4415 11.0938C2.40244 10.9766 2.39462 10.8555 2.41806 10.7305L3.1915 7.33203L0.578217 5.03516C0.476654 4.94922 0.410248 4.84375 0.378998 4.71875C0.347748 4.59375 0.351654 4.47266 0.390717 4.35547C0.429779 4.23047 0.496185 4.12891 0.589935 4.05078C0.691498 3.97266 0.804779 3.92578 0.929779 3.91016L4.39853 3.60547L5.76962 0.394531C5.8165 0.277344 5.89462 0.183594 6.004 0.113281C6.11337 0.0429688 6.23056 0.0078125 6.35556 0.0078125C6.48056 0.0078125 6.59775 0.0429688 6.70712 0.113281C6.8165 0.183594 6.89462 0.277344 6.9415 0.394531L8.31259 3.60547L11.7813 3.91016C11.9063 3.92578 12.0157 3.97266 12.1095 4.05078C12.211 4.12891 12.2813 4.23047 12.3204 4.35547ZM25.0404 4.35547C25.0795 4.47266 25.0834 4.59375 25.0521 4.71875C25.0209 4.84375 24.9545 4.94922 24.8529 5.03516L22.2396 7.33203L23.0131 10.7305C23.0365 10.8555 23.0248 10.9766 22.9779 11.0938C22.9388 11.2109 22.8685 11.3086 22.767 11.3867C22.6576 11.4648 22.5404 11.5039 22.4154 11.5039C22.2904 11.5117 22.1732 11.4844 22.0638 11.4219L19.0756 9.62891L16.0873 11.4219C16.0404 11.4453 15.9857 11.4648 15.9232 11.4805C15.8685 11.4961 15.8138 11.5039 15.7592 11.5039C15.6967 11.5039 15.6302 11.4922 15.5599 11.4688C15.4974 11.4531 15.4388 11.4258 15.3842 11.3867C15.2826 11.3086 15.2084 11.2109 15.1615 11.0938C15.1224 10.9766 15.1146 10.8555 15.1381 10.7305L15.9115 7.33203L13.2982 5.03516C13.1967 4.94922 13.1302 4.84375 13.099 4.71875C13.0677 4.59375 13.0717 4.47266 13.1107 4.35547C13.1498 4.23047 13.2162 4.12891 13.3099 4.05078C13.4115 3.97266 13.5248 3.92578 13.6498 3.91016L17.1185 3.60547L18.4896 0.394531C18.5365 0.277344 18.6146 0.183594 18.724 0.113281C18.8334 0.0429688 18.9506 0.0078125 19.0756 0.0078125C19.2006 0.0078125 19.3177 0.0429688 19.4271 0.113281C19.5365 0.183594 19.6146 0.277344 19.6615 0.394531L21.0326 3.60547L24.5013 3.91016C24.6263 3.92578 24.7357 3.97266 24.8295 4.05078C24.931 4.12891 25.0013 4.23047 25.0404 4.35547ZM37.7604 4.35547C37.7995 4.47266 37.8034 4.59375 37.7721 4.71875C37.7409 4.84375 37.6745 4.94922 37.5729 5.03516L34.9596 7.33203L35.7331 10.7305C35.7565 10.8555 35.7448 10.9766 35.6979 11.0938C35.6588 11.2109 35.5885 11.3086 35.487 11.3867C35.3776 11.4648 35.2604 11.5039 35.1354 11.5039C35.0104 11.5117 34.8932 11.4844 34.7838 11.4219L31.7956 9.62891L28.8073 11.4219C28.7604 11.4453 28.7057 11.4648 28.6432 11.4805C28.5885 11.4961 28.5338 11.5039 28.4792 11.5039C28.4167 11.5039 28.3502 11.4922 28.2799 11.4688C28.2174 11.4531 28.1588 11.4258 28.1042 11.3867C28.0026 11.3086 27.9284 11.2109 27.8815 11.0938C27.8424 10.9766 27.8346 10.8555 27.8581 10.7305L28.6315 7.33203L26.0182 5.03516C25.9167 4.94922 25.8502 4.84375 25.819 4.71875C25.7877 4.59375 25.7917 4.47266 25.8307 4.35547C25.8698 4.23047 25.9362 4.12891 26.0299 4.05078C26.1315 3.97266 26.2448 3.92578 26.3698 3.91016L29.8385 3.60547L31.2096 0.394531C31.2565 0.277344 31.3346 0.183594 31.444 0.113281C31.5534 0.0429688 31.6706 0.0078125 31.7956 0.0078125C31.9206 0.0078125 32.0377 0.0429688 32.1471 0.113281C32.2565 0.183594 32.3346 0.277344 32.3815 0.394531L33.7526 3.60547L37.2213 3.91016C37.3463 3.92578 37.4557 3.97266 37.5495 4.05078C37.651 4.12891 37.7213 4.23047 37.7604 4.35547ZM50.4804 4.35547C50.5195 4.47266 50.5234 4.59375 50.4921 4.71875C50.4609 4.84375 50.3945 4.94922 50.2929 5.03516L47.6796 7.33203L48.4531 10.7305C48.4765 10.8555 48.4648 10.9766 48.4179 11.0938C48.3788 11.2109 48.3085 11.3086 48.207 11.3867C48.0976 11.4648 47.9804 11.5039 47.8554 11.5039C47.7304 11.5117 47.6132 11.4844 47.5038 11.4219L44.5156 9.62891L41.5273 11.4219C41.4804 11.4453 41.4257 11.4648 41.3632 11.4805C41.3085 11.4961 41.2538 11.5039 41.1992 11.5039C41.1367 11.5039 41.0702 11.4922 40.9999 11.4688C40.9374 11.4531 40.8788 11.4258 40.8242 11.3867C40.7226 11.3086 40.6484 11.2109 40.6015 11.0938C40.5624 10.9766 40.5546 10.8555 40.5781 10.7305L41.3515 7.33203L38.7382 5.03516C38.6367 4.94922 38.5702 4.84375 38.539 4.71875C38.5077 4.59375 38.5117 4.47266 38.5507 4.35547C38.5898 4.23047 38.6562 4.12891 38.7499 4.05078C38.8515 3.97266 38.9648 3.92578 39.0898 3.91016L42.5585 3.60547L43.9296 0.394531C43.9765 0.277344 44.0546 0.183594 44.164 0.113281C44.2734 0.0429688 44.3906 0.0078125 44.5156 0.0078125C44.6406 0.0078125 44.7577 0.0429688 44.8671 0.113281C44.9765 0.183594 45.0546 0.277344 45.1015 0.394531L46.4726 3.60547L49.9413 3.91016C50.0663 3.92578 50.1757 3.97266 50.2695 4.05078C50.371 4.12891 50.4413 4.23047 50.4804 4.35547ZM63.2004 4.35547C63.2395 4.47266 63.2434 4.59375 63.2121 4.71875C63.1809 4.84375 63.1145 4.94922 63.0129 5.03516L60.3996 7.33203L61.1731 10.7305C61.1965 10.8555 61.1848 10.9766 61.1379 11.0938C61.0988 11.2109 61.0285 11.3086 60.927 11.3867C60.8176 11.4648 60.7004 11.5039 60.5754 11.5039C60.4504 11.5117 60.3332 11.4844 60.2238 11.4219L57.2356 9.62891L54.2473 11.4219C54.2004 11.4453 54.1457 11.4648 54.0832 11.4805C54.0285 11.4961 53.9738 11.5039 53.9192 11.5039C53.8567 11.5039 53.7902 11.4922 53.7199 11.4688C53.6574 11.4531 53.5988 11.4258 53.5442 11.3867C53.4426 11.3086 53.3684 11.2109 53.3215 11.0938C53.2824 10.9766 53.2746 10.8555 53.2981 10.7305L54.0715 7.33203L51.4582 5.03516C51.3567 4.94922 51.2902 4.84375 51.259 4.71875C51.2277 4.59375 51.2317 4.47266 51.2707 4.35547C51.3098 4.23047 51.3762 4.12891 51.4699 4.05078C51.5715 3.97266 51.6848 3.92578 51.8098 3.91016L55.2785 3.60547L56.6496 0.394531C56.6965 0.277344 56.7746 0.183594 56.884 0.113281C56.9934 0.0429688 57.1106 0.0078125 57.2356 0.0078125C57.3606 0.0078125 57.4777 0.0429688 57.5871 0.113281C57.6965 0.183594 57.7746 0.277344 57.8215 0.394531L59.1926 3.60547L62.6613 3.91016C62.7863 3.92578 62.8957 3.97266 62.9895 4.05078C63.091 4.12891 63.1613 4.23047 63.2004 4.35547Z" fill="#FFB800"/>
            </svg>
          </span>
          <span class="fs-14 text-muted"
            >({{ section.settings.main_product.metafields.reviews.rating_count | default: 0 }})</span
          >
        </div>
        <div class="todays-offer-price mb-10 text-center" style="padding-bottom: 10px;">
          {%- assign price_color = '#2B38D1' -%}
          {%- if section.settings.main_product.compare_at_price < section.settings.main_product.price -%}
            {%- assign price_color = '#DC323C' -%}
          {%- elsif section.settings.main_product.inventory_quantity < 10 -%}
            {%- assign price_color = '#EF262C' -%}
          {%- endif -%}
          <span
            class="fs-24 fw-700"
            style="background: {{ settings.color_price_bg | default: section.settings.price_bg_color | default: '#fff' }}; padding: 2px 12px; border-radius: 4px; color: {{ price_color }};"
          >
            {{- section.settings.main_product.price | money -}}
          </span>
          {% if section.settings.main_product.compare_at_price < section.settings.main_product.price %}
            <span class="text-muted text-line-through ms-2 fs-16">
              {{- section.settings.main_product.compare_at_price | money -}}
            </span>
          {% endif %}
        </div>
        <div class="todays-offer-countdown mb-10 text-center" style="padding-bottom: 10px;">
          <countdown-timer
            data-endtime="{{ section.settings.countdown_endtime }}"
            data-format="dd:hh:mm:ss"
            data-days="Days"
            data-hours="Hours"
            data-mins="Min"
            data-secs="Sec"
          ></countdown-timer>
        </div>
        <div class="todays-offer-progress mb-10" style="padding-bottom: 10px;">
          <div class="progress-bar" style="height: 10px; background: #eee; border-radius: 10px;">
            <div
              style="width: {{ section.settings.progress_percent }}%; background: #e53935; height: 100%; border-radius: 10px;"
            ></div>
          </div>
          <div class="fs-13 mt-2 text-center">Sold: {{ section.settings.sold }}/{{ section.settings.total }}</div>
        </div>
      </div>
      <!-- Right side products -->
      <div class="todays-offer-side grid grid-cols-2 flex-1" style="max-width: 480px; min-width: 320px;">
        {% for product in section.settings.side_products_right limit: 4 %}
          <div
            class="todays-offer-side-item bg-white rounded-8 p-16 flex flex-col justify-between shadow-sm"
            style="color: {{ settings.color_text | default: section.settings.text_color | default: '#222' }};"
          >
            <div class="relative mb-10">
              <a href="{{ product.url }}" class="block">
                <img
                  src="{{ product.featured_image | img_url: '240x' }}"
                  alt="{{ product.title }}"
                  class="w-full rounded-6"
                  loading="lazy"
                  width="240px"
                  height="240px"
                >
                <span
                  class="offer-badge badge badge-danger"
                  style="position:absolute;top:8px;left:8px;z-index:2;background:{{ settings.color_badge | default: '#e53935' }};"
                  >-20%</span
                >
              </a>
            </div>
            <div class="fw-600 fs-15 mb-2 line-clamp-2" style="padding-bottom: 6px;">{{ product.title }}</div>
            <div class="flex align-center gap-6 mb-2" style="padding-bottom: 6px;">
              <!-- SVG 5 sao vàng -->
              <span class="fake-rating-stars" style="display:inline-block;vertical-align:middle;">
                <!-- Dán SVG bạn gửi ở đây -->
                <svg width="64" height="12" viewBox="0 0 64 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12.3204 4.35547C12.3595 4.47266 12.3634 4.59375 12.3321 4.71875C12.3009 4.84375 12.2345 4.94922 12.1329 5.03516L9.51962 7.33203L10.2931 10.7305C10.3165 10.8555 10.3048 10.9766 10.2579 11.0938C10.2188 11.2109 10.1485 11.3086 10.047 11.3867C9.93759 11.4648 9.8204 11.5039 9.6954 11.5039C9.5704 11.5117 9.45322 11.4844 9.34384 11.4219L6.35556 9.62891L3.36728 11.4219C3.3204 11.4453 3.26572 11.4648 3.20322 11.4805C3.14853 11.4961 3.09384 11.5039 3.03915 11.5039C2.97665 11.5039 2.91025 11.4922 2.83994 11.4688C2.77744 11.4531 2.71884 11.4258 2.66415 11.3867C2.56259 11.3086 2.48837 11.2109 2.4415 11.0938C2.40244 10.9766 2.39462 10.8555 2.41806 10.7305L3.1915 7.33203L0.578217 5.03516C0.476654 4.94922 0.410248 4.84375 0.378998 4.71875C0.347748 4.59375 0.351654 4.47266 0.390717 4.35547C0.429779 4.23047 0.496185 4.12891 0.589935 4.05078C0.691498 3.97266 0.804779 3.92578 0.929779 3.91016L4.39853 3.60547L5.76962 0.394531C5.8165 0.277344 5.89462 0.183594 6.004 0.113281C6.11337 0.0429688 6.23056 0.0078125 6.35556 0.0078125C6.48056 0.0078125 6.59775 0.0429688 6.70712 0.113281C6.8165 0.183594 6.89462 0.277344 6.9415 0.394531L8.31259 3.60547L11.7813 3.91016C11.9063 3.92578 12.0157 3.97266 12.1095 4.05078C12.211 4.12891 12.2813 4.23047 12.3204 4.35547ZM25.0404 4.35547C25.0795 4.47266 25.0834 4.59375 25.0521 4.71875C25.0209 4.84375 24.9545 4.94922 24.8529 5.03516L22.2396 7.33203L23.0131 10.7305C23.0365 10.8555 23.0248 10.9766 22.9779 11.0938C22.9388 11.2109 22.8685 11.3086 22.767 11.3867C22.6576 11.4648 22.5404 11.5039 22.4154 11.5039C22.2904 11.5117 22.1732 11.4844 22.0638 11.4219L19.0756 9.62891L16.0873 11.4219C16.0404 11.4453 15.9857 11.4648 15.9232 11.4805C15.8685 11.4961 15.8138 11.5039 15.7592 11.5039C15.6967 11.5039 15.6302 11.4922 15.5599 11.4688C15.4974 11.4531 15.4388 11.4258 15.3842 11.3867C15.2826 11.3086 15.2084 11.2109 15.1615 11.0938C15.1224 10.9766 15.1146 10.8555 15.1381 10.7305L15.9115 7.33203L13.2982 5.03516C13.1967 4.94922 13.1302 4.84375 13.099 4.71875C13.0677 4.59375 13.0717 4.47266 13.1107 4.35547C13.1498 4.23047 13.2162 4.12891 13.3099 4.05078C13.4115 3.97266 13.5248 3.92578 13.6498 3.91016L17.1185 3.60547L18.4896 0.394531C18.5365 0.277344 18.6146 0.183594 18.724 0.113281C18.8334 0.0429688 18.9506 0.0078125 19.0756 0.0078125C19.2006 0.0078125 19.3177 0.0429688 19.4271 0.113281C19.5365 0.183594 19.6146 0.277344 19.6615 0.394531L21.0326 3.60547L24.5013 3.91016C24.6263 3.92578 24.7357 3.97266 24.8295 4.05078C24.931 4.12891 25.0013 4.23047 25.0404 4.35547ZM37.7604 4.35547C37.7995 4.47266 37.8034 4.59375 37.7721 4.71875C37.7409 4.84375 37.6745 4.94922 37.5729 5.03516L34.9596 7.33203L35.7331 10.7305C35.7565 10.8555 35.7448 10.9766 35.6979 11.0938C35.6588 11.2109 35.5885 11.3086 35.487 11.3867C35.3776 11.4648 35.2604 11.5039 35.1354 11.5039C35.0104 11.5117 34.8932 11.4844 34.7838 11.4219L31.7956 9.62891L28.8073 11.4219C28.7604 11.4453 28.7057 11.4648 28.6432 11.4805C28.5885 11.4961 28.5338 11.5039 28.4792 11.5039C28.4167 11.5039 28.3502 11.4922 28.2799 11.4688C28.2174 11.4531 28.1588 11.4258 28.1042 11.3867C28.0026 11.3086 27.9284 11.2109 27.8815 11.0938C27.8424 10.9766 27.8346 10.8555 27.8581 10.7305L28.6315 7.33203L26.0182 5.03516C25.9167 4.94922 25.8502 4.84375 25.819 4.71875C25.7877 4.59375 25.7917 4.47266 25.8307 4.35547C25.8698 4.23047 25.9362 4.12891 26.0299 4.05078C26.1315 3.97266 26.2448 3.92578 26.3698 3.91016L29.8385 3.60547L31.2096 0.394531C31.2565 0.277344 31.3346 0.183594 31.444 0.113281C31.5534 0.0429688 31.6706 0.0078125 31.7956 0.0078125C31.9206 0.0078125 32.0377 0.0429688 32.1471 0.113281C32.2565 0.183594 32.3346 0.277344 32.3815 0.394531L33.7526 3.60547L37.2213 3.91016C37.3463 3.92578 37.4557 3.97266 37.5495 4.05078C37.651 4.12891 37.7213 4.23047 37.7604 4.35547ZM50.4804 4.35547C50.5195 4.47266 50.5234 4.59375 50.4921 4.71875C50.4609 4.84375 50.3945 4.94922 50.2929 5.03516L47.6796 7.33203L48.4531 10.7305C48.4765 10.8555 48.4648 10.9766 48.4179 11.0938C48.3788 11.2109 48.3085 11.3086 48.207 11.3867C48.0976 11.4648 47.9804 11.5039 47.8554 11.5039C47.7304 11.5117 47.6132 11.4844 47.5038 11.4219L44.5156 9.62891L41.5273 11.4219C41.4804 11.4453 41.4257 11.4648 41.3632 11.4805C41.3085 11.4961 41.2538 11.5039 41.1992 11.5039C41.1367 11.5039 41.0702 11.4922 40.9999 11.4688C40.9374 11.4531 40.8788 11.4258 40.8242 11.3867C40.7226 11.3086 40.6484 11.2109 40.6015 11.0938C40.5624 10.9766 40.5546 10.8555 40.5781 10.7305L41.3515 7.33203L38.7382 5.03516C38.6367 4.94922 38.5702 4.84375 38.539 4.71875C38.5077 4.59375 38.5117 4.47266 38.5507 4.35547C38.5898 4.23047 38.6562 4.12891 38.7499 4.05078C38.8515 3.97266 38.9648 3.92578 39.0898 3.91016L42.5585 3.60547L43.9296 0.394531C43.9765 0.277344 44.0546 0.183594 44.164 0.113281C44.2734 0.0429688 44.3906 0.0078125 44.5156 0.0078125C44.6406 0.0078125 44.7577 0.0429688 44.8671 0.113281C44.9765 0.183594 45.0546 0.277344 45.1015 0.394531L46.4726 3.60547L49.9413 3.91016C50.0663 3.92578 50.1757 3.97266 50.2695 4.05078C50.371 4.12891 50.4413 4.23047 50.4804 4.35547ZM63.2004 4.35547C63.2395 4.47266 63.2434 4.59375 63.2121 4.71875C63.1809 4.84375 63.1145 4.94922 63.0129 5.03516L60.3996 7.33203L61.1731 10.7305C61.1965 10.8555 61.1848 10.9766 61.1379 11.0938C61.0988 11.2109 61.0285 11.3086 60.927 11.3867C60.8176 11.4648 60.7004 11.5039 60.5754 11.5039C60.4504 11.5117 60.3332 11.4844 60.2238 11.4219L57.2356 9.62891L54.2473 11.4219C54.2004 11.4453 54.1457 11.4648 54.0832 11.4805C54.0285 11.4961 53.9738 11.5039 53.9192 11.5039C53.8567 11.5039 53.7902 11.4922 53.7199 11.4688C53.6574 11.4531 53.5988 11.4258 53.5442 11.3867C53.4426 11.3086 53.3684 11.2109 53.3215 11.0938C53.2824 10.9766 53.2746 10.8555 53.2981 10.7305L54.0715 7.33203L51.4582 5.03516C51.3567 4.94922 51.2902 4.84375 51.259 4.71875C51.2277 4.59375 51.2317 4.47266 51.2707 4.35547C51.3098 4.23047 51.3762 4.12891 51.4699 4.05078C51.5715 3.97266 51.6848 3.92578 51.8098 3.91016L55.2785 3.60547L56.6496 0.394531C56.6965 0.277344 56.7746 0.183594 56.884 0.113281C56.9934 0.0429688 57.1106 0.0078125 57.2356 0.0078125C57.3606 0.0078125 57.4777 0.0429688 57.5871 0.113281C57.6965 0.183594 57.7746 0.277344 57.8215 0.394531L59.1926 3.60547L62.6613 3.91016C62.7863 3.92578 62.8957 3.97266 62.9895 4.05078C63.091 4.12891 63.1613 4.23047 63.2004 4.35547Z" fill="#FFB800"/>
                </svg>
              </span>
              <span class="fs-13 text-muted">(68)</span>
            </div>
            <div class="flex align-center gap-6 mb-2" style="padding-bottom: 6px;">
              {%- assign price_color = '#2B38D1' -%}
              {%- if product.compare_at_price < product.price -%}
                {%- assign price_color = '#DC323C' -%}
              {%- elsif product.inventory_quantity < 10 -%}
                {%- assign price_color = '#EF262C' -%}
              {%- endif -%}
              <span
                class="fw-700 fs-16"
                style="background: {{ settings.color_price_bg | default: section.settings.price_bg_color | default: '#fff' }}; padding: 2px 8px; border-radius: 4px; color: {{ price_color }};"
              >
                {{- product.price | money -}}
              </span>
              {% if product.compare_at_price < product.price %}
                <span class="text-muted text-line-through fs-14">{{ product.compare_at_price | money }}</span>
              {% endif %}
            </div>
            <div class="flex align-center gap-6" style="padding-bottom: 2px;">
              <span class="fs-13 text-muted">In stock: {{ product.inventory_quantity | default: 0 }}</span>
              {% if product.inventory_quantity > 10 %}
                <span class="stock-check-icon" title="In stock">
                  <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.252 0.251953L4.25 6.25391L1.74805 3.75195C1.62956 3.64258 1.48828 3.58789 1.32422 3.58789C1.16927 3.58789 1.03711 3.64258 0.927734 3.75195C0.809245 3.87044 0.75 4.01172 0.75 4.17578C0.75 4.33073 0.809245 4.46289 0.927734 4.57227L3.83984 7.49805C3.94922 7.60742 4.08594 7.66211 4.25 7.66211C4.41406 7.66211 4.55078 7.60742 4.66016 7.49805L11.0723 1.07227C11.1908 0.962891 11.25 0.830729 11.25 0.675781C11.25 0.511719 11.1908 0.370443 11.0723 0.251953C10.9629 0.142578 10.8262 0.0878906 10.6621 0.0878906C10.5072 0.0878906 10.3704 0.142578 10.252 0.251953Z" fill="#008A00"/>
                  </svg>
                </span>
              {% else %}
                <span class="stock-check-icon" title="Low stock">
                  <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.252 0.251953L4.25 6.25391L1.74805 3.75195C1.62956 3.64258 1.48828 3.58789 1.32422 3.58789C1.16927 3.58789 1.03711 3.64258 0.927734 3.75195C0.809245 3.87044 0.75 4.01172 0.75 4.17578C0.75 4.33073 0.809245 4.46289 0.927734 4.57227L3.83984 7.49805C3.94922 7.60742 4.08594 7.66211 4.25 7.66211C4.41406 7.66211 4.55078 7.60742 4.66016 7.49805L11.0723 1.07227C11.1908 0.962891 11.25 0.830729 11.25 0.675781C11.25 0.511719 11.1908 0.370443 11.0723 0.251953C10.9629 0.142578 10.8262 0.0878906 10.6621 0.0878906C10.5072 0.0878906 10.3704 0.142578 10.252 0.251953Z" fill="#E53935"/>
                  </svg>
                </span>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Today's Offer",
  "settings": [
    {
      "type": "select",
      "id": "section_width",
      "label": "Section width",
      "default": "container",
      "options": [
        { "value": "container", "label": "Container" },
        { "value": "fluid_container", "label": "Fluid container" },
        { "value": "stretch_width", "label": "Stretch width" },
        { "value": "full_width", "label": "Full width" }
      ]
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Section background color",
      "default": "#fff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Section text color",
      "default": "#222"
    },
    {
      "type": "color",
      "id": "price_bg_color",
      "label": "Price background color",
      "default": "#fff"
    },
    {
      "type": "color",
      "id": "badge_color",
      "label": "Badge background color",
      "default": "#e53935"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "label": "Khoảng cách giữa các cột (todays-offer-grid gap, px)",
      "min": 0,
      "max": 80,
      "step": 1,
      "default": 5
    },
    {
      "type": "range",
      "id": "side_column_gap",
      "label": "Left/Right side column gap (px)",
      "min": 0,
      "max": 80,
      "step": 1,
      "default": 5
    },
    {
      "type": "range",
      "id": "side_row_gap",
      "label": "Left/Right side row gap (px)",
      "min": 0,
      "max": 80,
      "step": 1,
      "default": 5
    },
    {
      "type": "range",
      "id": "card_inner_padding",
      "label": "Product card inner padding (px)",
      "min": 0,
      "max": 40,
      "step": 2,
      "default": 16
    },
    {
      "type": "range",
      "id": "element_spacing",
      "label": "Spacing between elements in card (px)",
      "min": 0,
      "max": 24,
      "step": 2,
      "default": 6
    },
    {
      "type": "product",
      "id": "main_product",
      "label": "Featured product"
    },
    {
      "type": "text",
      "id": "main_title",
      "label": "Offer title",
      "default": "TODAY'S OFFER"
    },
    {
      "type": "text",
      "id": "main_badge",
      "label": "Discount badge (fixed -20%)",
      "default": "-20%"
    },
    {
      "type": "text",
      "id": "countdown_endtime",
      "label": "Countdown end time (YYYY-MM-DD HH:MM:SS)"
    },
    {
      "type": "number",
      "id": "progress_percent",
      "label": "Sold percent (progress bar)",
      "default": 60
    },
    {
      "type": "number",
      "id": "sold",
      "label": "Sold quantity",
      "default": 620
    },
    {
      "type": "number",
      "id": "total",
      "label": "Total quantity",
      "default": 998
    },
    {
      "type": "product_list",
      "id": "side_products_left",
      "label": "Left side products"
    },
    {
      "type": "product_list",
      "id": "side_products_right",
      "label": "Right side products"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "label": "Section padding top (px)",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 40
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "label": "Section padding bottom (px)",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "Today's Offer"
    }
  ]
}
{% endschema %}

<style>
  .todays-offer-section.container-fluid {
    max-width: 100vw;
    background: {{ section.settings.background_color }};
    color: {{ section.settings.text_color }};
    padding-top: {{ section.settings.section_padding_top }}px;
    padding-bottom: {{ section.settings.section_padding_bottom }}px;
  }
  .todays-offer-grid {
    width: 100%;
    gap: 5px;
    align-items: stretch;
    justify-content: space-between;
  }
  .todays-offer-side {
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: {{ section.settings.side_column_gap }}px;
    row-gap: {{ section.settings.side_row_gap }}px;
    max-width: 480px;
    min-width: 320px;
  }
  .todays-offer-side-item {
    background: #fff;
    border-radius: 8px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    position: relative;
  }
  .offer-badge {
    font-size: 13px;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 4px;
    background: #e53935;
    color: #fff;
    letter-spacing: 0.5px;
    z-index: 2;
    box-shadow: 0 2px 8px rgba(229, 57, 53, 0.08);
  }
  .todays-offer-main {
    background: #fff;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
    max-width: 520px;
    min-width: 340px;
    padding: 40px;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
  }
  .todays-offer-image img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
  }
  .stock-check-icon {
    display: inline-flex;
    align-items: center;
    margin-left: 4px;
  }
  @media (max-width: 1200px) {
    .todays-offer-side {
      max-width: 320px;
    }
    .todays-offer-main {
      max-width: 400px;
      padding: 24px;
    }
  }
  @media (max-width: 900px) {
    .todays-offer-grid {
      flex-direction: column;
      align-items: center;
      gap: 5px;
      column-gap: 0;
    }
    .todays-offer-side {
      max-width: 100%;
      min-width: 0;
      grid-template-columns: 1fr 1fr;
      column-gap: 16px;
      row-gap: 16px;
    }
    .todays-offer-main {
      margin: 20px 0;
      min-width: 0;
      max-width: 100%;
      padding: 20px;
    }
  }
  @media (max-width: 600px) {
    .todays-offer-side {
      grid-template-columns: 1fr;
      gap: 12px;
      column-gap: 0;
      row-gap: 12px;
    }
    .todays-offer-main {
      padding: 10px;
      margin-left: 0;
      margin-right: 0;
    }
  }
</style>
